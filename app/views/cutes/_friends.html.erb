<div id="friends">
</div>

<script type="text/javascript" charset="utf-8">
  var myFriends;

  function friendBox(uid) {
    this.xOffset = 5;
    this.yOffset = 50;

    $("#picture-" + uid).hover(function (e) {
        this.img_title = this.title;
        this.title = "";
        var img_src = $(this).attr('img_src');
        var desc = (this.img_title != "") ? "<h3>" + this.img_title + "</h3>" : "";
        var image = (img_src) ? img_src : this.src;
        $("body").append("<div id='pimg'><img src='" + image + "' alt='Image preview' />" + desc + "</div>");
        $("#pimg").css("top", (e.pageY - xOffset) + "px").css("left", (e.pageX + yOffset) + "px");
        $("#pimg").fadeIn(700);
    }, function () {
        this.title = this.img_title;
        $("#pimg").remove();

    });

    $("#picture-" + uid).mousemove(function (e) {
        $("#pimg").css("top", (e.pageY - xOffset) + "px").css("left", (e.pageX + yOffset) + "px");
    });
  }

  function cuteClick(uid, name, cute) {
    link_id = "#cute-box-holder-" + uid;

    if(cute == true) {
      // Cute link_id person.
      $.get("<%= url_for(:action => 'new') -%>", { 'uid': uid, 'name': name },
        function(data) {
          $(link_id).fadeOut();
          $(link_id).html(data);
          $(link_id).fadeIn();
        });
    } else {
      // Uncute link_id person.
      $.get("<%= url_for(:action => 'destroy') -%>", { 'uid': uid, 'name': name },
        function(data) {
          $(link_id).fadeOut();
          $(link_id).html(data);
          $(link_id).fadeIn();
      });
    }

    return false;
  }

  function addFriendBox(friend) {

  }

  function userFriends(response) {
    myFriends = response;

    friends = myFriends.data
    for(i = 0; i < friends.length; i++) {
      $("#friends").append(friends[i]).name);
    }
  }

  $(document).ready(function() {
    FB.api('/me/friends', userFriends);
  });
</script>

